{% extends 'base.html' %}
{% block title %}Upload Invoices{% endblock %}
{% block head %}
<script>
function showSpinner() {
  document.getElementById('spinner').style.display = 'flex';
}
function handleFiles(files) {
  document.getElementById('file-input').files = files;
  showSpinner();
  document.getElementById('upload-form').submit();
}
function initDragAndDrop() {
  const area = document.getElementById('upload-area');
  area.addEventListener('dragover', (e) => {
    e.preventDefault();
    area.classList.add('dragover');
  });
  area.addEventListener('dragleave', () => {
    area.classList.remove('dragover');
  });
  area.addEventListener('drop', (e) => {
    e.preventDefault();
    area.classList.remove('dragover');
    handleFiles(e.dataTransfer.files);
  });
}
window.addEventListener('DOMContentLoaded', initDragAndDrop);
</script>
{% endblock %}
{% block content %}
<h2>Upload PDF Invoices</h2>
<form id="upload-form" action="/upload" method="post" enctype="multipart/form-data">
    <div id="upload-area" class="upload-area">
        Drag and drop PDFs here or click to select
        <input id="file-input" type="file" name="files" accept="application/pdf" multiple style="display:none" onchange="handleFiles(this.files)">
    </div>
</form>
<div id="spinner" class="spinner-overlay"><div class="spinner"></div></div>
<script>
document.getElementById('upload-area').onclick = () => document.getElementById('file-input').click();
</script>
{% endblock %}
